<div class="tp-contact-form-area pt-130 pb-110">
  <div class="container">
    <div class="tp-section-top tp-section-top--centered text-center mb-60">
      <div class="tp-section-subtitle mb-20">
        <h4
          class="text-uppercase tp-text-theme-primary fw-600 fs-16 letter-spacing-2"
        >
          CONTACT US
        </h4>
      </div>
      <div class="tp-section-title">
        <h2 class="text-uppercase fw-700 fs-45 fs-xl-40 fs-lg-35 fs-md-30 mb-0">
          LET'S START A CONVERSATION
        </h2>
      </div>
    </div>

    <div class="row gy-5 gx-5">
      <div class="col-lg-4">
        <!-- Contact Info Box - Phone -->
        <div class="tp-contact-info-box mb-30">
          <div class="tp-contact-info-box__icon mb-20">
            <i class="fa-solid fa-phone fs-35 tp-text-theme-primary"></i>
          </div>
          <div class="tp-contact-info-box__content">
            <h5 class="tp-contact-info-box__title fw-600 fs-20 mb-15">
              Call Us 24/7
            </h5>
            <a
              class="tp-contact-info-box__link fs-16 d-block mb-10"
              href="tel:9725518964"
            >
              +91 85528 59594
            </a>
          </div>
        </div>

        <!-- Contact Info Box - Email -->
        <div class="tp-contact-info-box mb-30">
          <div class="tp-contact-info-box__icon mb-20">
            <i class="fa-solid fa-envelope fs-35 tp-text-theme-primary"></i>
          </div>
          <div class="tp-contact-info-box__content">
            <h5 class="tp-contact-info-box__title fw-600 fs-20 mb-15">
              Email Us Anytime
            </h5>
            <a
              class="tp-contact-info-box__link fs-16"
              href="mailto:connect@uncoredigital.com"
            >
              connect@uncoredigital.com
            </a>
          </div>
        </div>

        <!-- Contact Info Box - Location -->
        <div class="tp-contact-info-box mb-30">
          <div class="tp-contact-info-box__icon mb-20">
            <i class="fa-solid fa-location-dot fs-35 tp-text-theme-primary"></i>
          </div>
          <div class="tp-contact-info-box__content">
            <h5 class="tp-contact-info-box__title fw-600 fs-20 mb-15">
              Our Location
            </h5>
            <p class="tp-contact-info-box__link fs-16 mb-10">
              626 RXR Plaza, Uniondale, NY 11556, USA
            </p>
            <p class="tp-contact-info-box__link fs-16 mb-0">
              1013, Ratnanjali, Solitaire, India
            </p>
          </div>
        </div>
      </div>

      <div class="col-lg-8">
        <div class="tp-contact-form tp-join-form-wra tp-contact-inner-wrap">
          <!-- Section Header -->
          <div class="tp-section-top text-center mb-40">
            <h5
              class="tp-text-theme-primary fw-600 fs-16 text-uppercase letter-spacing-2 mb-15"
            >
              Get In Touch
            </h5>
            <h3 class="fw-700 fs-30 mb-0">Have Any Question?</h3>
          </div>

          <!-- Thank You Message -->
          <div
            id="thank-you-message"
            style="display: none;"
            class="text-center p-5 mb-4"
          >
            <div class="success-checkmark mb-3">
              <div class="check-icon">
                <span class="icon-line line-tip"></span>
                <span class="icon-line line-long"></span>
                <div class="icon-circle"></div>
                <div class="icon-fix"></div>
              </div>
            </div>
            <h3 class="tp-ff-heading fs-35 mb-3 text-success">Thank You!</h3>
            <p class="fs-18 mb-0">
              Your message has been sent successfully. We'll get back to you
              soon.
            </p>
          </div>

          <!-- Contact Form -->
          <form
            id="contact-form"
            action="https://api.web3forms.com/submit"
            method="POST"
            class="row g-4"
          >
            <input
              type="hidden"
              name="access_key"
              value="757d2293-c9f0-4362-9e05-f171a8a03426"
            />
            <input
              type="hidden"
              name="from_name"
              value="Message from secureplacetowork.com"
            />
            <input
              type="hidden"
              name="subject"
              value="New Contact Form Submission from secureplacetowork.com"
            />

            <div class="col-xl-6">
              <div class="form-group">
                <label class="fs-16 mb-10 d-block fw-500" for="name"
                  >Your Name*</label
                >
                <input
                  type="text"
                  class="tp-input w-100"
                  id="name"
                  name="name"
                  placeholder="Name"
                  required
                />
              </div>
            </div>

            <div class="col-xl-6">
              <div class="form-group">
                <label class="fs-16 mb-10 d-block fw-500" for="email"
                  >Email Address*</label
                >
                <input
                  type="email"
                  class="tp-input w-100"
                  id="email"
                  name="email"
                  placeholder="Email"
                  required
                />
              </div>
            </div>

            <div class="col-xl-6">
              <div class="form-group">
                <label class="fs-16 mb-10 d-block fw-500" for="phone"
                  >Phone Number*</label
                >
                <input
                  type="text"
                  class="tp-input w-100"
                  id="phone"
                  name="phone"
                  placeholder="Phone Number"
                  required
                />
              </div>
            </div>

            <div class="col-xl-6">
              <div class="form-group">
                <label class="fs-16 mb-10 d-block fw-500" for="website"
                  >Website</label
                >
                <input
                  type="text"
                  class="tp-input w-100"
                  id="website"
                  name="website"
                  placeholder="Your Website"
                />
              </div>
            </div>

            <div class="col-xl-12">
              <div class="form-group">
                <label class="fs-16 mb-10 d-block fw-500" for="message"
                  >Describe your message*</label
                >
                <textarea
                  class="tp-textarea tp-input w-100"
                  id="message"
                  name="message"
                  rows="5"
                  placeholder="How can we help? Feel free to write here"
                  required></textarea>
              </div>
            </div>

            <div class="col-12">
              <button
                type="submit"
                class="tp-btn-xl tp-round-4 fs-16 tp-bg-theme-primary w-100 d-block tp-text-common-white hover-text-white fw-500"
              >
                Send Message
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .letter-spacing-2 {
    letter-spacing: 2px;
  }

  .tp-contact-info-box {
    padding: 30px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
  }

  .tp-contact-info-box:hover {
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    transform: translateY(-5px);
  }

  .tp-contact-info-box__icon i {
    transition: transform 0.3s ease;
  }

  .tp-contact-info-box:hover .tp-contact-info-box__icon i {
    transform: scale(1.1);
  }

  .tp-contact-info-box__link {
    color: #666;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .tp-contact-info-box__link:hover {
    color: var(--tp-theme-primary);
  }

  .success-checkmark {
    width: 80px;
    height: 80px;
    margin: 0 auto;
  }

  .check-icon {
    width: 80px;
    height: 80px;
    position: relative;
    border-radius: 50%;
    box-sizing: content-box;
    border: 4px solid #4caf50;
  }

  .check-icon::before {
    top: 3px;
    left: -2px;
    width: 30px;
    transform-origin: 100% 50%;
    border-radius: 100px 0 0 100px;
  }

  .check-icon::after {
    top: 0;
    left: 30px;
    width: 60px;
    transform-origin: 0 50%;
    border-radius: 0 100px 100px 0;
    animation: rotate-circle 4.25s ease-in;
  }

  .icon-line {
    height: 5px;
    background-color: #4caf50;
    display: block;
    border-radius: 2px;
    position: absolute;
    z-index: 10;
  }

  .icon-line.line-tip {
    top: 46px;
    left: 14px;
    width: 25px;
    transform: rotate(45deg);
    animation: icon-line-tip 0.75s;
  }

  .icon-line.line-long {
    top: 38px;
    right: 8px;
    width: 47px;
    transform: rotate(-45deg);
    animation: icon-line-long 0.75s;
  }

  .icon-circle {
    top: -4px;
    left: -4px;
    z-index: 10;
    width: 80px;
    height: 80px;
    border-radius: 50%;
    position: absolute;
    box-sizing: content-box;
    border: 4px solid rgba(76, 175, 80, 0.5);
  }

  .icon-fix {
    top: 8px;
    width: 5px;
    left: 26px;
    z-index: 1;
    height: 85px;
    position: absolute;
    transform: rotate(-45deg);
    background-color: #fff;
  }

  @keyframes icon-line-tip {
    0% {
      width: 0;
      left: 1px;
      top: 19px;
    }
    54% {
      width: 0;
      left: 1px;
      top: 19px;
    }
    70% {
      width: 50px;
      left: -8px;
      top: 37px;
    }
    84% {
      width: 17px;
      left: 21px;
      top: 48px;
    }
    100% {
      width: 25px;
      left: 14px;
      top: 46px;
    }
  }

  @keyframes icon-line-long {
    0% {
      width: 0;
      right: 46px;
      top: 54px;
    }
    65% {
      width: 0;
      right: 46px;
      top: 54px;
    }
    84% {
      width: 55px;
      right: 0px;
      top: 35px;
    }
    100% {
      width: 47px;
      right: 8px;
      top: 38px;
    }
  }
</style>

<script>
  const form = document.getElementById("contact-form") as HTMLFormElement;
  const thankYouMessage = document.getElementById("thank-you-message");

  if (form) {
    // 8. Toast Notifications helper
    function showToast(message: string, isError: boolean = false) {
      const toast = document.createElement("div");
      toast.textContent = message;
      toast.style.position = "fixed";
      toast.style.bottom = "20px";
      toast.style.left = "50%";
      toast.style.transform = "translate(-50%, 20px)";
      toast.style.opacity = "0";
      toast.style.backgroundColor = isError
        ? "#f44336"
        : "var(--tp-theme-primary, #4CAF50)";
      toast.style.color = "#fff";
      toast.style.padding = "12px 24px";
      toast.style.borderRadius = "4px";
      toast.style.boxShadow = "0 4px 12px rgba(0,0,0,0.15)";
      toast.style.zIndex = "9999";
      toast.style.transition = "all 0.3s ease";
      toast.style.fontFamily = "inherit";
      toast.style.fontSize = "15px";
      toast.style.fontWeight = "500";
      toast.style.textAlign = "center";

      document.body.appendChild(toast);

      // Animate in
      requestAnimationFrame(() => {
        toast.style.transform = "translate(-50%, 0)";
        toast.style.opacity = "1";
      });

      // Remove after 3.5 seconds
      setTimeout(() => {
        toast.style.transform = "translate(-50%, 20px)";
        toast.style.opacity = "0";
        setTimeout(() => {
          if (document.body.contains(toast)) {
            document.body.removeChild(toast);
          }
        }, 300);
      }, 3500);
    }

    form.addEventListener("submit", async function (e) {
      // 1. Intercept Submission
      e.preventDefault();

      // 2. Capture Fields
      const formData = new FormData(form);
      const name = formData.get("name") as string;
      const email = formData.get("email") as string;
      const phone = formData.get("phone") as string;
      const website = formData.get("website") as string;
      const subject =
        (formData.get("subject") as string) || "New Contact Form Submission";
      const message = formData.get("message") as string;

      // 3. Validation
      if (!name || !email || !message) {
        showToast(
          "Please fill out all required fields (Name, Email, Message).",
          true,
        );
        return;
      }

      const submitButton = form.querySelector(
        'button[type="submit"]',
      ) as HTMLButtonElement | null;
      const originalButtonText = submitButton
        ? submitButton.innerHTML
        : "Send Message";

      // 4. UI Button State
      if (submitButton) {
        submitButton.disabled = true;
        submitButton.innerHTML = "Sending...";
        submitButton.style.opacity = "0.7";
        submitButton.style.cursor = "not-allowed";
      }

      // 5. HTML Email Template
      const htmlBody = `
        <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f9fafb; padding: 40px 20px;">
          <div style="max-width: 600px; margin: 0 auto; background-color: #ffffff; padding: 40px; border-radius: 12px; border: 1px solid #e5e7eb; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);">
            
            <h2 style="color: #111827; font-size: 24px; font-weight: 700; margin: 0 0 24px 0; text-align: center;">New Contact Submission</h2>
            
            <hr style="border: none; border-top: 1px solid #e5e7eb; margin-bottom: 32px;" />
            
            <table style="width: 100%; border-collapse: separate; border-spacing: 0; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">
              <tr>
                <th style="padding: 16px; text-align: left; border-bottom: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; background-color: #f8fafc; color: #475569; font-weight: 600; width: 35%; font-size: 14px;">Source</th>
                <td style="padding: 16px; border-bottom: 1px solid #e5e7eb; color: #1e293b; background-color: #ffffff; font-size: 14px;">Secure Place</td>
              </tr>
              <tr>
                <th style="padding: 16px; text-align: left; border-bottom: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; background-color: #f8fafc; color: #475569; font-weight: 600; width: 35%; font-size: 14px;">Name</th>
                <td style="padding: 16px; border-bottom: 1px solid #e5e7eb; color: #1e293b; background-color: #ffffff; font-size: 14px;">${name || ""}</td>
              </tr>
              <tr>
                <th style="padding: 16px; text-align: left; border-bottom: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; background-color: #f8fafc; color: #475569; font-weight: 600; width: 35%; font-size: 14px;">Email</th>
                <td style="padding: 16px; border-bottom: 1px solid #e5e7eb; color: #1e293b; background-color: #ffffff; font-size: 14px;">
                  <a href="mailto:${email || ""}" style="color: #2563eb; text-decoration: none;">${email || ""}</a>
                </td>
              </tr>
              <tr>
                <th style="padding: 16px; text-align: left; border-bottom: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; background-color: #f8fafc; color: #475569; font-weight: 600; width: 35%; font-size: 14px;">Phone Number</th>
                <td style="padding: 16px; border-bottom: 1px solid #e5e7eb; color: #1e293b; background-color: #ffffff; font-size: 14px;">${phone || "Not provided"}</td>
              </tr>
              <tr>
                <th style="padding: 16px; text-align: left; border-bottom: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; background-color: #f8fafc; color: #475569; font-weight: 600; width: 35%; font-size: 14px;">Website</th>
                <td style="padding: 16px; border-bottom: 1px solid #e5e7eb; color: #1e293b; background-color: #ffffff; font-size: 14px;">${website ? `<a href="${website.startsWith("http") ? website : "https://" + website}" style="color: #2563eb; text-decoration: none;">${website}</a>` : "Not provided"}</td>
              </tr>
              <tr>
                <th style="padding: 16px; text-align: left; border-bottom: 1px solid #e5e7eb; border-right: 1px solid #e5e7eb; background-color: #f8fafc; color: #475569; font-weight: 600; width: 35%; font-size: 14px;">Subject</th>
                <td style="padding: 16px; border-bottom: 1px solid #e5e7eb; color: #1e293b; background-color: #ffffff; font-size: 14px;">${subject || ""}</td>
              </tr>
              <tr>
                <th style="padding: 16px; text-align: left; border-right: 1px solid #e5e7eb; background-color: #f8fafc; color: #475569; font-weight: 600; width: 35%; font-size: 14px;">Message</th>
                <td style="padding: 16px; color: #1e293b; background-color: #ffffff; font-size: 14px; white-space: pre-wrap; line-height: 1.5;">${message || ""}</td>
              </tr>
            </table>

            <p style="margin-top: 32px; text-align: center; color: #9ca3af; font-size: 13px;">
              This email was generated automatically from the <strong style="color: #6b7280; font-weight: 600;">Secure Place</strong> website contact form.
            </p>
          </div>
        </div>
      `;

      // 6. Payload Construction
      const payload = {
        source: "Secure Place",
        htmlBody: htmlBody,
      };

      try {
        // 7. Fetch Request
        const response = await fetch(
          "https://script.google.com/macros/s/AKfycbzB9_gPPiXv_kz2_zklYxuQccyxL76FGxCg3ASBa_te3KvyBLZsgusRsCCVRSfWIMJ__g/exec",
          {
            method: "POST",
            headers: {
              "Content-Type": "text/plain;charset=utf-8", // to safely bypass CORS
            },
            body: JSON.stringify(payload),
          },
        );

        // 9. Post-Fetch Logic
        if (response.ok) {
          form.reset();
          showToast("Message sent successfully!", false);

          // Re-trigger standard success visualization if exists
          if (thankYouMessage) {
            form.style.display = "none";
            thankYouMessage.style.display = "block";
            setTimeout(() => {
              thankYouMessage.style.display = "none";
              form.style.display = "block";
            }, 5000);
          }
        } else {
          showToast("Failed to send message. Please try again.", true);
          console.error("Server error:", await response.text());
        }
      } catch (error) {
        console.error("Submission error:", error);
        showToast("A network error occurred. Please try again.", true);
      } finally {
        // Always logic
        if (submitButton) {
          submitButton.disabled = false;
          submitButton.innerHTML = originalButtonText;
          submitButton.style.opacity = "1";
          submitButton.style.cursor = "pointer";
        }
      }
    });
  }
</script>
